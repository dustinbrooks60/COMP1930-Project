<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ShareGarden - Seek</title>
    <link href="assets/style.css" rel="stylesheet" type="text/css">
    <link type="text/css" rel="stylesheet" href="assets/buttons.css">

    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css"/>

</head>
<style>
    div {
        display: inline;
        margin-left: 10px;
        font-size: 20px;
        margin-right: 20px;
    }

    label {
        font-size: 18px;
    }

    #container1,
    #container2,
    #container3 {
        padding-bottom: 32px;
    }

    h2 {
        margin: 75px;
        margin-top: 100px;
        margin-left: 0;
    }


</style>
<body id="wrapper">
<script src="assets/setup_firebase.js"></script>
<header>
    <img id="toplogo" src="images/ShareGarden.png" alt="Main Logo">
</header>
<script src="assets/jsfile.js"></script>
<nav>
    <ul id="nav-ul">
        <a href="index.html">
            <button class="nav_button"> Home Page</button>
        </a>
        <a href="login.html">
            <button class="nav_button" id="sign-user"> Login</button>
        </a>

        <button class="nav_button collapse"> Concept</button>

        <div class="content">
            <p>The concept of ShareGarden is to connect communities to healthy food alternatives.
                Users can choose to share their garden space or look for gardens to pick up produce from. Sharing
                your garden space means that you have a surplus of produce that you are willing to part with.
                Communal contributions help those who need it the most. ShareGarden is a non-profit organization;
                however, donations and contributions are required for those seeking a garden.</p>
        </div>

        <button class="nav_button collapse"> About Us</button>

        <div class="content">
            <p>Website created by Dustin Brooks, Allen Wong, and Iris Chow</p>
        </div>

    </ul>
</nav>

<form id="seekprofile">
    <fieldset>
        <legend><b>Choose your plan</b></legend>


        <h3>Produce Plan</h3>
        <div id="container1">

            <input type="radio" class="plan" name="plan" value="Pick-up-once">
            <label>Pick-up Once</label>

            <input type="radio" class="plan" name="plan" value="Pick-up-weekly">
            <label>Pick-up Weekly</label>


            <input type="radio" class="plan" name="plan" value="Pick-up-monthly">
            <label>Pick-up Monthly</label>

        </div>

        <h3>Produce Type</h3>
        <div id="container2">
            <div>
                <input type="radio" class="type" name="type" value="Vegetables">
                <label>Vegetables</label>
            </div>
            <div>
                <input type="radio" class="type" name="type" value="Fruits">
                <label>Fruits</label>
            </div>
            <div>
                <input type="radio" class="type" name="type" value="Fruits&Veggies">
                <label>Fruits and Vegetables</label>
            </div>

        </div>
        <br>

        <h3>Select Quantity</h3>
        <div id="container3">
            <input type="radio" class="feed" name="quantity" value="Feed for 1">
            <label>Feed for 1</label>
        </div>
        <div>
            <input type="radio" class="feed" name="quantity" value="Feed for 2-3">
            <label>Feed for 2 or 3</label>
        </div>
        <div>
            <input type="radio" class="feed" name="quantity" value="Feed for 3-5">
            <label>Feed for 3 to 5</label>
        </div>
        <br>

    </fieldset>
    <button class="collapse" style="margin-top: 1%;">Contribute</button>
    <div class="content">
        <main>
            <h2>Choose your donation type and choice below</h2>
            <div id="container4">Donation option:

                <input type="checkbox" class="donation" name="donation" value="Monthly-donation">
                <label>Monthly donation</label>

                <input type="checkbox" class="donation" name="donation" value="One-time-donation">
                <label>One-time donation</label>

            </div>
            <br>

            <div id="container5">Donation Amount:

                <input type="checkbox" class="amount" name="amount" value="10.00">
                <label>$10</label>

                <input type="checkbox" class="amount" name="amount" value="25.00">
                <label>$25</label>

                <input type="checkbox" class="amount" name="amount" value="50.00">
                <label>$50</label>

                <input type="text" class="amount" name="other">
                <label>Other amount (minimum $1):</label>

            </div>
            <br>

            <ul style="list-style: none">
                <li><input type="radio" name="options" class="organization" value="City Farmer">
                    <a href="http://www.cityfarmer.info/" target="_blank"><label>City Farmer</label></a>
                </li>
                <li>
                    <input type="radio" name="options" class="organization"
                           value="Grasslands Conservation Council of British Columbia">
                    <a href="http://www.bcgrasslands.org/index.php/index.php.info/" target="_blank"><label>Grasslands
                        Conservation Council of British Columbia</label></a>
                </li>
                <li>
                    <input type="radio" name="options" class="organization" value="Burke Mountain Naturalists">
                    <a href="http://www.bmn.bc.ca/about" target="_blank"><label> Burke Mountain Naturalists </label></a>
                </li>
                <li>
                    <input type="radio" name="options" class="organization" value="Friends Uniting for Nature">
                    <a href="https://www.canadahelps.org/en/charities/fraser-valley-watersheds-coalition/"
                       target="_blank"><label>Fraser Valley Watersheds Coalition</label> </a>
                </li>
                <li>
                    <input type="radio" name="options" class="organization" value="ChariTREE Foundation">
                    <a href="http://www.charitree-foundation.org/" target="_blank"><label> ChariTREE Foundation</label>
                    </a>
                </li>
                <li>

                    <input type="radio" name="options" class="organization" value="ForestEthics Solutions Society">
                    <a href="https://www.canadahelps.org/en/charities/better-environmentally-sound-transportation-association-best"
                       target="_blank"><label> Better Environmentally Sound Transportation</label></a>
                </li>
                <a href="https://www.canadahelps.org/en/explore/charities/category/environment" target="_blank"> Or
                    donate to any of
                    the options found here and provide a proof of receipt.</a>
                <input type="button" value="Submit PDF" style="margin-left: 2%">
            </ul>
            <br>
            <div style="padding-top: 2%">
                <input type="submit" value="Submit form">
            </div>
            <div style="padding-top: 2%">
                <input type="reset" value="Reset form">
            </div>


        </main>
    </div>

</form>
<script>
    document.getElementById('seekprofile').addEventListener('submit', submitForm);
    var firebase = app_firebase;

    function submitForm(e) {
        e.preventDefault();
        // var quantity = document.getElementsByClassName("feed").value;
        // var type_of_user = document.getElementById("type_of_user").value;
        // var produce = document.getElementById("produce").value;
        let plans = document.getElementsByClassName('plan');
        let producetypes = document.getElementsByClassName('type');
        let quantity = document.getElementsByClassName('feed');
        let options = document.getElementsByClassName('donation');
        let amount_selection = document.getElementsByClassName('amount');
        let organizations = document.getElementsByClassName('organization');
        var plan = getValue(plans);
        var type = getValue(producetypes);
        var user_quantity = getValue(quantity);
        var option = getValue(options);
        var donationamount = getValue(amount_selection);
        var organization = getValue(organizations);
        var host = ['Raymond', 'Alex', 'Roland'];
        //console.log(set);
        //console.log(interest);
        //console.log(program);

        firebase.auth().onAuthStateChanged(function (user) {
            var userid = localStorage.getItem('userid'); //Update database with the profile info collected for the user
            var promise = firebase.database().ref('users/' + userid + '/').update({
                "quantity": user_quantity,
                "producetype": type,
                "produceplan": plan,
                "host": host[Math.floor(Math.random() * host.length)],
                "donationoption": option,
                "donationamount": donationamount,
                "donationorganization": organization
            });

            //When the submits the form, update firebase, then go to summary.html
            promise.then(function () {
                window.location.href = "summary.html";
            });
        });
    };
</script>

<script src="assets/jsfile.js"></script>


</body>
</html>
