<!DOCTYPE html>
<html>   
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="app.css" />
    <title> Profile Form</title>
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>    
    <script src="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css" />
    <link type="text/css" rel="stylesheet" href="style.css" />
    
    <style>
       /* Set the size of the div element that contains the map */
      #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>


</head>
    
<body id="wrapper">
    <header>
        <img id="toplogo" src="images/ShareGarden.png" height="512" width="512" alt="Main Logo">
    </header>

<nav>
    <ul>
        <li><a href="index.html"><button class="nav_button"> Home Page </button></a></li>
        <li><a href="login.html"><button class="nav_button"> Login </button></a></li>
        <li class = "collapse"><button class="nav_button"> Concept </button></li>
        <div class="content">
          <p>The concept of ShareGarden is to connect communities to healthy food alternatives.
             Users can choose to share their garden space or look for gardens to pick up produce from. Sharing your garden space means that you have a surplus of produce that you are willing to part with. Communal contributions help those who need it the most. ShareGarden is a non-profit organization; however, donations and contributions are required for those seeking a garden.</p>
        </div>
        <li class = "collapse "><button class="nav_button">  About Us</button></li>
        <div class="content">
          <p>Website created by Dustin Brooks, Allen Wong, and Iris Chow</p>
        </div>
    </ul>
</nav>

   <script src="setup_firebase.js"></script>
   <p>Enter additional profile information.</p>
   <form id="profile" >
      Address: <input type="text" id="address" name="address"><br>
      Type of User: <input type="text" id="type_of_user" name="type_of_user"> <br>
      Type of Produce: <input type="text" id="produce" name="produce"> <br><br>
      <input type="submit">
   </form>

   <script>
   document.getElementById('profile').addEventListener('submit', submitForm);
   function submitForm(e) {
       e.preventDefault();
       var address = document.getElementById("address").value;
       var type_of_user = document.getElementById("type_of_user").value;
       var produce = document.getElementById("produce").value;
       //console.log(set);
       //console.log(interest);
       //console.log(program);
       var firebase = app_firebase;
       
       firebase.auth().onAuthStateChanged(function(user){
        	console.log(set);
          	console.log(interest);
          	console.log(program);
          	console.log(user.uid);
          	
          	//Update database with the profile info collected for the user
          	var promise = firebase.database().ref('users/'+user.uid).update( {
           	 "set": set,
           	 "interest": interest,
           	 "program": program
         	 });
          
         	//When the database update is done, then go to logged_in.html
       	 	promise.then(function() {
       			window.location.href="logged_in.html";
       		});
       });
   };
   </script>
    
    
<div id="map"></div>
    <script>
// Initialize and add the map
function initMap() {
  // The location of Vancouver
  var vancouver = {lat: 49.246292, lng: -123.116226};
  // The map, centered at Vancouver
  var map = new google.maps.Map(
      document.getElementById('map'), {zoom: 4, center: vancouver});
  // The marker, positioned at Uluru
  var marker = new google.maps.Marker({position: vancouver, map: map});
}
    </script>
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->
    <!-- Currently throws an error because our website is local only right now -->
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?lib=AIzaSyBhjele-xa2sB7oFRQN9DUrdpKq5VJbfWw&callback=initMap">
    </script>


</body>
</html>